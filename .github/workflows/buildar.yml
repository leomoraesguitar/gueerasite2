# .github/workflows/deploy.yml

name: Deploy to Github

on:
  # push:
  #   branches:
  #     - master
  #     - main
  workflow_dispatch:  # Permite execu√ß√£o manual

jobs:
  build_and_deploy:
    uses: ./.github/workflows/reusable-build.yml  # Chama o workflow reutiliz√°vel
    # with:
    #   # Passa par√¢metros, se necess√°rio
    # secrets:
    #   # Se precisar de segredos, configure aqui

  deploy:
    needs: build_and_deploy  # Aguarda o job de build_and_deploy completar

    runs-on: ubuntu-latest

    permissions:
      pages: write
      id-token: write

    environment:
      name: github-pages

    steps:
      - name: Setup Pages
        uses: actions/configure-pages@v5

      - name: Deploy to GitHub Pages üöÄ
        if: github.event_name == 'push'  # Deploy somente em push
        id: deployment
        uses: actions/deploy-pages@v4.0.5
        with:
          artifact_name: web-build-artifact
